### 1.git的组成

**git主要由以下几个部分组成：**

	- 工作区：就是你在电脑里能看到的目录。
	- 暂存区：英文叫 stage 或 index。一般存放在 **.git** 目录下的 index 文件（.git/index）中，暂存区有时也叫作索引（index）。
	- 版本库：工作区有一个隐藏目录 **.git**，这个不算工作区，而是 Git 的版本库。

**结构关系主要由下图所示：**

<img src="https://www.runoob.com/wp-content/uploads/2015/02/1352126739_7909.jpg" style="zoom:70%;" />

### 2.常见命令及原理

- `git add`**：**当对工作区修改（或新增）的文件执行此命令时，暂存区的目录树被更新，同时工作区修改（或新增）的文件内容被写入到对象库中的一个新的对象中，而该对象的ID被记录在暂存区的文件索引中。
- `git init`**：**初始化仓库，用于在目录中创建新的 Git 仓库，会在你的项目中生成了 `.git `这个子目录，这就是你的 Git 仓库了，所有有关你的此项目的所有内容和元数据都存放在这里。
- `git commit -m '注释'`**：**当执行此提交操作时，暂存区的目录树写到版本库（对象库）中，master 分支会做相应的更新。在windows命令行中需使用双引号注释，即`git commit -m "注释"`。
- `git status`**：**当执行此操作，检查了当前版本库是否有文件未提交,可以查看在你上次提交之后是否有对文件进行再次修改。
- `git diff`**：**通过此操作，可以查看文件修改内容，即比较文件在暂存区和工作区的差异，显示已写入暂存区和已经被修改但尚未写入暂存区文件的区别。
- `git log`**：**获得历史修改记录。
- `git blame <file>`**：** 以列表形式查看指定文件的历史修改记录。
- `cat`**：**查看文件内容。
- `git reset [--soft | --mixed | --hard] [HEAD]`**：**回退版本，退回上上个版本可以使用`git reset --hard HEAD^^`，若退回版本较多也可以使用`git reset --hard HEAD~回退多少版本`的命令，但是`--hard`会撤销工作区中所有未提交的修改内容，将暂存区与工作区都回到上一次版本，并删除之前的所有信息提交；`--mixed` 为默认，可以不用带该参数，用于重置暂存区的文件与上一次的提交(commit)保持一致，工作区文件内容保持不变； `--soft`参数用于回退到某个版本。
- `git reflog`**：**获得历史版本号。
- `git mv`**：**移动或重命名工作区文件。
- `git rm --cached <file>`此命令会直接从暂存区删除文件，工作区则不做出改变，若不加 `--cashed`，则会将文件从暂存区和工作区中删除。
- `git clone <repo> <directory>`克隆仓库到指定目录，其中`<repo>`为仓库地址，`<directory>` 为本地目录，其中 `<directory>`可省略，即执行该命令后，会在当前目录下创建一个名为grit的目录，其中包含一个 .git 的目录，用于保存下载下来的所有版本记录。
- `git remote`**：**远程仓库操作，提供了一些用于查看、添加、重命名和删除远程仓库的功能。
- `git fetch [alias]`**：**用于从远程获取代码库，命令告诉 Git 去获取它有你没有的数据，然后可执行`git merge [alias]/[branch]`将服务器上的任何更新（假设有人这时候推送到服务器了）合并到你的当前分支。
- `git pull`**：**用于从远程获取代码并合并本地的版本，是 `git fetch` 和 ` git merge FETCH_HEAD` 的简写。
- `git push <远程主机名> <本地分支名>:<远程分支名>`**：**用于从将本地的分支版本上传到远程并合并。

